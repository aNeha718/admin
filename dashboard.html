<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>
  <style>
    body {font-family: Arial; background:#f4f4f9; padding:20px;}
    table {width:100%; border-collapse: collapse; margin-top:10px;}
    th, td {border:1px solid #ccc; padding:8px; text-align:center;}
    button {padding:6px 10px; background:#333; color:white; border:none; cursor:pointer;}
  </style>
</head>
<body>
  <h2>Event List</h2>
  <table id="eventTable"></table>

  <h2>Participants</h2>
  <table id="participantTable"></table>

<script>
async function loadEvents(){
  let res=await fetch("http://localhost:3000/events");
  let events=await res.json();
  let html="<tr><th>ID</th><th>Title</th><th>Date</th><th>Participants</th></tr>";
  events.forEach(e=>{
    html+=`<tr>
      <td>${e.id}</td>
      <td>${e.title}</td>
      <td>${e.date}</td>
      <td><button onclick="loadParticipants(${e.id})">View</button></td>
    </tr>`;
  });
  document.getElementById("eventTable").innerHTML=html;
}

async function loadParticipants(eventId){
  let res=await fetch("http://localhost:3000/participants/"+eventId);
  let data=await res.json();
  let html="<tr><th>ID</th><th>Name</th><th>Email</th></tr>";
  data.forEach(p=>{
    html+=`<tr><td>${p.id}</td><td>${p.name}</td><td>${p.email}</td></tr>`;
  });
  document.getElementById("participantTable").innerHTML=html;
}

loadEvents();
</script>
</body>
</html>
