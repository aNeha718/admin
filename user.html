<!DOCTYPE html>
<html>
<head>
  <title>User Dashboard</title>
  <style>
    body{font-family:Arial;background:#f4f4f9;padding:20px;}
    table{width:100%;border-collapse:collapse;}
    th,td{border:1px solid #ccc;padding:8px;text-align:center;}
  </style>
</head>
<body>
<h2>User Dashboard</h2>
<table id="eventTable"></table>

<script>
async function loadEvents(){
  const res=await fetch("http://localhost:3000/events");
  const data=await res.json();
  let html="<tr><th>ID</th><th>Title</th><th>Date</th><th>Action</th></tr>";
  data.forEach(e=>{
    html+=`<tr><td>${e.id}</td><td>${e.title}</td><td>${e.date}</td>
    <td><button onclick="register(${e.id})">Register</button></td></tr>`;
  });
  document.getElementById("eventTable").innerHTML=html;
}
async function register(eventId){
  const username=prompt("Enter your username:");
  await fetch("http://localhost:3000/registerEvent",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({username,eventId})});
  alert("Registered successfully!");
}
loadEvents();
</script>
</body>
</html>
